create table autor(
	id int primary key not null auto_increment,
	nome varchar(150) not null,
	data_nascimento date not null,
	cpf char(11) not null
);

create table categoria(
	id int primary key not null auto_increment,
    descricao varchar(100) not null
);

create table livro(
	id int primary key not null auto_increment,
    titulo varchar(150) not null,
    isbn char(13) not null,
    editora varchar(100) not null,
    ano year not null,
    id_autor int not null,
    id_categoria int not null,
    foreign key (id_autor) references autor(id),
    foreign key (id_categoria) references categoria(id)
);

create table livro_autor_assoc(
	id_livro int not null,
    id_autor int not null,
    foreign key (id_livro) references livro(id),
    foreign key (id_autor) references autor(id),
    primary key (id_livro, id_autor)
);

create table usuario(
	id int primary key not null auto_increment,
    nome varchar(150),
    email varchar(150),
    senha varchar(100)
);

create table aluno(
	id int primary key not null auto_increment,
    ra int,
    curso varchar(150),
    nome varchar(150)
);

create table emprestimo(
	id int primary key not null auto_increment,
    data_emprestimo date default (current_date),
    data_devolucao date,
    id_livro int not null,
    id_usuario int not null,
    id_aluno int not null,
    foreign key (id_livro) references livro(id),
    foreign key (id_usuario) references usuario(id),
    foreign key (id_aluno) references aluno(id)
);